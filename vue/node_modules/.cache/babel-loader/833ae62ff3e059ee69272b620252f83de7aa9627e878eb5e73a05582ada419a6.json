{"ast":null,"code":"//import $ from 'jquery';\nimport axios from 'axios';\nimport NavBar from './components/NavBar.vue';\nimport PanelSearchCond from './components/PanelSearchCond.vue';\nimport KnowledgeTable from './components/KnowledgeTable.vue';\nimport Footer from './components/Footer.vue';\nexport default {\n  name: 'App',\n  components: {\n    NavBar,\n    PanelSearchCond,\n    KnowledgeTable,\n    Footer\n  },\n  data() {\n    return {\n      windowSize: {\n        x: 0,\n        y: 0\n      },\n      headers: [\n      // ID列は非表示なのでデータ不要\n      {\n        key: \"categoryId\",\n        title: \"カテゴリー\",\n        align: \"center\",\n        sortable: false,\n        width: \"15%\"\n      }, {\n        key: \"subcategoryId\",\n        title: \"サブカテゴリー\",\n        align: \"center\",\n        sortable: false,\n        width: \"15%\"\n      }, {\n        key: \"title\",\n        title: \"タイトル\",\n        align: \"center\",\n        sortable: false,\n        width: \"25%\"\n      }, {\n        key: \"content\",\n        title: \"内容\",\n        align: \"center\",\n        sortable: false,\n        width: \"45%\"\n      }],\n      categories: [],\n      subcategories: [],\n      knowledges: [],\n      endpoint: \"personal\",\n      searchCond: {}\n    };\n  },\n  methods: {\n    onResize() {\n      this.windowSize = {\n        x: window.innerWidth,\n        y: window.innerHeight\n      };\n    },\n    /* カテゴリーのマスタデータを検索 */\n    searchCategoryList() {\n      axios.get(\"/\" + this.endpoint + \"/searchCategory\").then(response => {\n        this.categories = response.data.categories;\n        this.subcategories = response.data.subcategories;\n        console.log(\"↓searchCategoryのレスポンス\");\n        console.log(response.data);\n\n        // 子コンポーネントの配列に反映\n        this.$refs.cmpKnowledge.setCategory(this.categories, this.subcategories);\n      }).catch(error => {\n        console.error(\"初期設定エラー:\", error);\n      });\n    },\n    /* 「検索」押下時処理 */\n    async search(inputSearchCond) {\n      try {\n        const response = await axios.post(\"/\" + this.endpoint + \"/searchKnowledge\", inputSearchCond);\n        this.knowledges = response.data.knowledges;\n        this.searchCond = inputSearchCond;\n        console.log(\"↓searchKnowledgeのレスポンス\");\n        console.log(response.data);\n\n        // 子コンポーネントの配列に反映\n        this.$refs.cmpKnowledge.setKnowledge(this.knowledges);\n      } catch (error) {\n        console.error('Error submitting data:', error);\n        alert(\"検索が失敗しました。再試行してください。\");\n      }\n    },\n    /* 「保存」押下時処理 */\n    async save(categories, subcategories, knowledges, IsSelected) {\n      if (IsSelected) {\n        if (confirm(\"選択した行を削除し、保存してよろしいですか？\")) {\n          knowledges = this.$refs.cmpKnowledge.removeSelectedKnowledges();\n        } else {\n          return true;\n        }\n      }\n      try {\n        const searchCondition = this.searchCond;\n        const response = await axios.post(\"/\" + this.endpoint + \"/save\", {\n          categories,\n          subcategories,\n          knowledges,\n          searchCondition\n        });\n        console.log('Data submitted:', response.data);\n        alert(\"保存しました。\");\n      } catch (error) {\n        console.error('Error submitting data:', error);\n        alert(\"保存が失敗しました。再試行してください。\");\n      }\n    }\n  },\n  beforeCreate() {},\n  created() {\n    console.log(\"personalのcreated\");\n    this.searchCategoryList();\n  },\n  mounted() {\n    this.onResize();\n  }\n};","map":{"version":3,"names":["axios","NavBar","PanelSearchCond","KnowledgeTable","Footer","name","components","data","windowSize","x","y","headers","key","title","align","sortable","width","categories","subcategories","knowledges","endpoint","searchCond","methods","onResize","window","innerWidth","innerHeight","searchCategoryList","get","then","response","console","log","$refs","cmpKnowledge","setCategory","catch","error","search","inputSearchCond","post","setKnowledge","alert","save","IsSelected","confirm","removeSelectedKnowledges","searchCondition","beforeCreate","created","mounted"],"sources":["/Applications/Eclipse_2024-09.app/Contents/workspace/knowledgeManagement/vue/src/Personal.vue"],"sourcesContent":["<template>\n\t<v-layout>\n\t\t<NavBar/>\n\t\t<v-main>\n\t\t\t<span v-resize=\"onResize\"></span>\n\t\t\t<header class=\"pt-5\">\n\t\t\t\t<h3 class=\"display-6\">\n\t\t\t\t\t<span class=\"markerGray\">\n\t\t\t\t\t\t個人ナレッジ\n\t\t\t\t\t</span>\n\t\t\t\t</h3>\n\t\t\t</header>\n\n\t\t\t<div class=\"mx-3 mb-5\">\n\t\t\t\n\t\t\t\t<!-- 検索条件 -->\n\t\t\t\t<PanelSearchCond \n\t\t\t\t\t:categories=\"categories\" \n\t\t\t\t\t:subcategories=\"subcategories\"\n\t\t\t\t\t:endpoint=\"endpoint\" \n\t\t\t\t\t@call-parent-search=\"search\"\n\t\t\t\t/>\n\n\t\t\t\t<!-- ナレッジテーブル -->\n\t\t\t\t<KnowledgeTable\n\t\t\t\t\t:headers=\"headers\"\n\t\t\t\t\t:endpoint=\"endpoint\"\n\t\t\t\t\tref=\"cmpKnowledge\"\n\t\t\t\t\t@call-parent-save=\"save\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t\n\t\t\t<Footer/>\n\t\t</v-main>\n\t</v-layout>\n</template>\n\n<script>\n//import $ from 'jquery';\nimport axios from 'axios';\nimport NavBar from './components/NavBar.vue';\nimport PanelSearchCond from './components/PanelSearchCond.vue';\nimport KnowledgeTable from './components/KnowledgeTable.vue';\nimport Footer from './components/Footer.vue';\n\nexport default {\n\tname: 'App',\n\tcomponents: {\n\t\tNavBar,\n\t\tPanelSearchCond,\n\t\tKnowledgeTable,\n\t\tFooter,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\twindowSize: {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t},\n\t\t\theaders: [\n\t\t\t\t// ID列は非表示なのでデータ不要\n\t\t\t\t{ key: \"categoryId\", title: \"カテゴリー\", align: \"center\", sortable: false, width: \"15%\" },\n\t\t\t\t{ key: \"subcategoryId\", title: \"サブカテゴリー\", align: \"center\", sortable: false, width: \"15%\" },\n\t\t\t\t{ key: \"title\", title: \"タイトル\", align: \"center\", sortable: false, width: \"25%\" },\n\t\t\t\t{ key: \"content\", title: \"内容\", align: \"center\", sortable: false, width: \"45%\" },\n\t\t\t],\n\t\t\tcategories: [],\n\t\t\tsubcategories: [],\n\t\t\tknowledges: [],\n\t\t\tendpoint: \"personal\",\n\t\t\tsearchCond: {},\n\t\t};\n\t},\n\tmethods: {\n\t\tonResize() {\n\t\t\tthis.windowSize = { x: window.innerWidth, y: window.innerHeight }\n\t\t},\n\t\t/* カテゴリーのマスタデータを検索 */\n\t\tsearchCategoryList() {\n\t\t\taxios.get(\"/\" + this.endpoint + \"/searchCategory\")\n\t\t\t.then(response => {\n\t\t\t\tthis.categories = response.data.categories;\n\t\t\t\tthis.subcategories = response.data.subcategories;\n\t\t\t\tconsole.log(\"↓searchCategoryのレスポンス\");\n\t\t\t\tconsole.log(response.data);\n\t\t\t\t\n\t\t\t\t// 子コンポーネントの配列に反映\n\t\t\t\tthis.$refs.cmpKnowledge.setCategory(this.categories, this.subcategories);\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tconsole.error(\"初期設定エラー:\", error);\n\t\t\t});\n\t\t},\n\t\t/* 「検索」押下時処理 */\n\t\tasync search(inputSearchCond) {\n\t\t\ttry {\n\t\t\t\tconst response = await axios.post(\"/\" + this.endpoint + \"/searchKnowledge\", inputSearchCond);\n\t\t\t\tthis.knowledges = response.data.knowledges;\n\t\t\t\tthis.searchCond = inputSearchCond;\n\t\t\t\tconsole.log(\"↓searchKnowledgeのレスポンス\");\n\t\t\t\tconsole.log(response.data);\n\t\t\t\t\n\t\t\t\t// 子コンポーネントの配列に反映\n\t\t\t\tthis.$refs.cmpKnowledge.setKnowledge(this.knowledges);\n\t\t\t\t\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error submitting data:', error);\n\t\t\t\talert(\"検索が失敗しました。再試行してください。\");\n\t\t\t}\n\t\t},\n\t\t/* 「保存」押下時処理 */\n\t\tasync save(categories, subcategories, knowledges, IsSelected) {\n\t\t\tif(IsSelected) {\n\t\t\t\tif(confirm(\"選択した行を削除し、保存してよろしいですか？\")) {\n\t\t\t\t\tknowledges = this.$refs.cmpKnowledge.removeSelectedKnowledges();\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n            \n\t\t\ttry {\n\t\t\t\tconst searchCondition = this.searchCond;\n\t\t\t\tconst response = await axios.post(\"/\" + this.endpoint + \"/save\", { categories, subcategories, knowledges, searchCondition });\n\t\t\t\tconsole.log('Data submitted:', response.data);\n\t\t\t\talert(\"保存しました。\");\n\t\t\t\t\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error submitting data:', error);\n\t\t\t\talert(\"保存が失敗しました。再試行してください。\");\n\t\t\t}\n\t\t},\n\t},\n\tbeforeCreate () {\n\t},\n\tcreated() {\n\t\tconsole.log(\"personalのcreated\");\n\t\tthis.searchCategoryList();\n\t},\n\tmounted () {\n\t\tthis.onResize()\n\t},\n}\n</script>\n\n<style>\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}